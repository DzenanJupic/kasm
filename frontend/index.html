<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
    <title>KASM</title>

    <link data-trunk href="bootstrap/css/bootstrap.min.css" rel="css">
    <link data-trunk href="bootstrap/js/bootstrap.bundle.min.js" rel="copy-file">
    <link data-trunk href="ace" rel="copy-dir">

    <script src="bootstrap.bundle.min.js"></script>
    <script src="ace/ace.js"></script>
</head>
<style>
    html, body {
        overflow: hidden;
        box-sizing: border-box;
    }
</style>
<body>
<div id="app"></div>
<link data-trunk href="Cargo.toml" rel="rust"/>
</body>
<script>
    let start_editor_interval = null;
    let set_main_padding_interval = null;

    let editor = null;

    function start_editor() {
        if (start_editor_interval !== null) {
            try {
                editor = ace.edit("editor");
                editor.setTheme("ace/theme/dracula");
                editor.session.setMode("ace/mode/text");

                clearInterval(start_editor_interval);
                start_editor_interval = null;
            } catch (_) {
            }
        }
    }

    function set_main_padding() {
        if (set_main_padding_interval !== null) {
            try {
                let header_height = document.getElementsByTagName("header")[0].offsetHeight;
                let footer_height = document.getElementsByTagName("footer")[0].offsetHeight;
                let main = document.getElementsByTagName("main")[0];
                let ram_table = document.getElementById("ram-table");
                let console = document.getElementById("console");

                main.style.paddingTop = `${header_height}px`;
                main.style.paddingBottom = `${footer_height}px`;
                ram_table.style.maxHeight = `${main.offsetHeight - console.offsetHeight - header_height - footer_height}px`;

                clearInterval(set_main_padding_interval);
                set_main_padding_interval = null;
            } catch (_) {
            }
        }
    }

    function get_editor_value() {
        if (editor !== null) {
            return editor.getValue();
        } else {
            return null;
        }
    }

    document.addEventListener('DOMContentLoaded', () => {
        start_editor_interval = setInterval(start_editor, 100);
        set_main_padding_interval = setInterval(set_main_padding, 100);
    });
    document.addEventListener('resize', () => {
        set_main_padding_interval = setInterval(set_main_padding, 100);
    });
</script>
</html>
